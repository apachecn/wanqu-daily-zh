# 可读代码的 10 个实践

> 原文:[https://Jason . pure concepts . net/2018/09/practices-write-readable-code-less-complex/？UTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](https://jason.pureconcepts.net/2018/09/practices-write-readable-code-less-complex/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

我写代码已经 20 年了。在那段时间里，我和 17 个团队一起用不同的语言编写代码，构建了数百个项目。这些包括从简单的博客网站，到支持每秒 3000 次请求的 API，再到 T2 最畅销的应用 T3。

从这些经历中，结合[我读过的书](/articles/the-reading-list/)，我很清楚代码中最重要的是什么:**可读性**。

从表面上看，可读性似乎是主观的。不同的语言、代码库和团队可能会有所不同。但是当你看下面的时候，在所有的代码中有核心元素使它可读。

很多程序员离电脑太近了。如果代码运行，其他都不重要。虽然这是一种常见的防御手段，但它消除了我们工作中的所有人为因素。

在过去的几个月里，我一直致力于将这些元素提炼为 10 个编写代码的实践，重点是提高可读性和降低复杂性。我已经详细地写了这些，并在 [BaseCode](https://basecodefieldguide.com) 中将它们应用到现实世界的代码片段中。

不幸的是，许多人会认为这些太微不足道。太基础了。但是我向你保证，我遇到的每一点糟糕的代码都没有应用这些实践。每一个好的代码，如果不是很多的话，都是这些实践中的一个。

* * *

## 格式化

如此多的精力浪费在格式化上。制表符对空格。奥尔曼对 K&R。你会意识到格式化在编程中并不重要。采用标准格式，将其应用于代码库，并实现自动化。然后你就可以把精力重新放在实际编写代码上。

## 死代码

所有这些注释块、未使用的变量和不可访问的代码都是 rot。他们有效地对读者说，*“我不在乎这个代码”*。于是一个腐烂的循环开始了。随着时间的推移，这些死代码会毁掉你的代码库。这是经典的[破窗理论](https://en.wikipedia.org/wiki/Broken_windows_theory)。你必须寻找并摧毁死亡代码。虽然这不需要成为你的主要关注点，但永远做一个[童子军](/articles/are-you-a-boy-scout/)。

## 嵌套代码

几乎所有代码的基础都是逻辑。我们编写代码来进行决策、迭代和计算。这通常会导致分支或循环，从而产生深度嵌套的代码块。虽然这对于计算机来说可能很容易跟踪，但对于人类来说却是很大的精神负担。因此，代码看起来复杂且不可读。通过使用保护子句、早期返回或函数式编程的各个方面来解开嵌套代码。

## 使用对象

尽管现在是面向对象编程的时代，我们仍然有原始的痴迷。我们在长参数列表、数据块和自定义数组/字典结构中发现了这一点。这些可以被重构为对象。这样做不仅使数据结构形式化，而且为伴随原始数据的所有重复逻辑提供了一个家。

## 大型街区

虽然我不坚持硬数字，代码块可以达到一个临界长度。当你确定你有一个*大块*代码时，就有机会*识别*、*重组*，以及*重构*代码。这个简单的过程允许您确定代码块的上下文和抽象级别，这样您就可以正确地确定职责，并将代码重构为可读性更好、更简单的代码块。

## 命名

当然，给事物命名是困难的。但只是因为我们让它变得困难。有一个小技巧可以很好地处理编程中的许多事情，包括命名- *延迟*。不要纠结于给什么东西命名。继续编码吧。如果有必要的话，用一个句子来命名一个变量。继续编码吧。我保证当你完成这个功能或者作品的时候，一个更好的名字将会出现。

## 删除注释

这个练习对我来说是最初的游戏改变者。这让我走上了关注可读性的道路。尽管我努力解释，但总有至少一个人因此恨我。他们举了一个例子，说明注释是绝对必要的。当然，当哈勃望远镜遥测系统必须通过返回未知读数来与遗留适配器接口时，可能需要用注释来传达。但是对于几乎所有其他的事情，你应该挑战自己重写代码，这样它就不需要注释了。

## 合理回报

我们返回事物最奇怪的值。尤其是对于边界的情况。像`-1`，或者`687`，或者`null`这样的值。反过来，要编写大量代码来处理这些值。事实上，`null`的创造者称之为[十亿美元的错误](https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare)。你的目标应该是返回一个更合理的值。理想情况下，即使在出现*负路径*的情况下，也允许调用代码继续运行。如果真的有例外情况，有比`null`更好的沟通方式。

## 三法则

想象一个数学数列。我给你提供数字`2`并问*“下一步是什么？”*也许是`3`或者`4`，但也许是`1`或者`2.1`。事实上你不知道。因此，我提供了系列中的另一个数字`2, 4`，并询问*“下一个是什么？”*可能是`6`或者`8`或者`16`。再说一次，尽管我们越来越自信，但我们真的不知道。现在我提供系列中的另一个数字`2, 4, 16`，并问*“下一个是什么？”*现在有了三个数据点，我们的程序员大脑会看到平方数列，并确定下一个数字是`256`。那就是三个的*法则。*

这个例子演示了不要用代码分散我们的注意力，我们不应该马上预先确定一个抽象或设计。三原则通过推迟直到我们有更多的数据来做出明智的决定，抵消了我们对抗重复的需要。用桑迪·梅斯、*的[话说，“复制远比错误的抽象便宜。”](https://www.sandimetz.com/blog/2016/1/20/the-wrong-abstraction)*

## 对称

现在是最后一个练习，它给任何一点代码带来持久的接近诗意的可读性——对称。这是直接从 Kent Beck 的[实现模式](https://www.amazon.com/Implementation-Patterns-Kent-Beck/dp/0321413091)中提取的，其中简单陈述了:

> 代码中的对称是指相同的思想无论在哪里出现都以相同的方式表达。

这说起来容易做起来难。对称体现了写作的创造性。它是许多其他实践的基础:命名、结构、对象、模式。它可能因语言、代码库和团队而异。因此，你可以用一生的时间去追求它。然而，一旦你开始对你的代码应用对称性，[一个更纯粹的形式出现了](https://twitter.com/gonedark/status/1041716025862119425)并且代码很快成形。

* * *

这些是 _BaseCode 中实践的高级视图。我鼓励你查看本帖中链接的资源，[观看应用这些实践的截屏视频](https://www.youtube.com/watch?v=s9LwS6RFax0&index=2&t=14s&list=PLmwAMIdrAmK7cjLLYrKppUhaR2ywTuKhm)，或者阅读在 [BaseCode](https://basecodefieldguide.com) 中应用于真实世界代码片段的全部细节。_