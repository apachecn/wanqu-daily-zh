# JavaScript ES6 ç‰¹æ€§æ¦‚è¿°(åˆå ECMAScript 6 å’Œ ES2015+) |é˜¿å¾·é‡Œå®‰Â·æ¢…å¸Œäºšåšå®¢

> åŸæ–‡:[http://Adrian Meijia . com/blog/2016/10/19/Overview-of-JavaScript-ES6-features-a-k-a-ECMAScript-6-and-es 2015/ï¼ŸUTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](http://adrianmejia.com/blog/2016/10/19/Overview-of-JavaScript-ES6-features-a-k-a-ECMAScript-6-and-ES2015/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)

JavaScript åœ¨è¿‡å»çš„å‡ å¹´é‡Œå‘ç”Ÿäº†å¾ˆå¤§çš„å˜åŒ–ã€‚è¿™æ˜¯æ‚¨ä»Šå¤©å°±å¯ä»¥å¼€å§‹ä½¿ç”¨çš„ 12 é¡¹æ–°åŠŸèƒ½ï¼

## JavaScript å†å²

è¿™ç§è¯­è¨€çš„æ–°å¢éƒ¨åˆ†è¢«ç§°ä¸º ECMAScript 6ã€‚å®ƒä¹Ÿè¢«ç§°ä¸º ES6 æˆ– ES2015+ã€‚

è‡ª 1995 å¹´ JavaScript çš„æ¦‚å¿µæå‡ºä»¥æ¥ï¼Œå®ƒä¸€ç›´åœ¨ç¼“æ…¢å‘å±•ã€‚æ¯éš”å‡ å¹´å°±ä¼šæœ‰æ–°çš„è¡¥å……ã€‚ECMAScript äº 1997 å¹´é—®ä¸–ï¼Œä¸º JavaScript çš„å‘å±•æŒ‡æ˜äº†æ–¹å‘ã€‚å®ƒä¸€ç›´åœ¨å‘å¸ƒ ES3ã€ES5ã€ES6 ç­‰ç‰ˆæœ¬ã€‚

![](../Images/bbee1134c471a027d7eeedeee41fd318.png "History of JavaScript Evolution")

å¦‚æ‚¨æ‰€è§ï¼ŒES3ã€ES5 å’Œ ES6 ä¹‹é—´æœ‰ 10 åˆ° 6 å¹´çš„å·®è·ã€‚æ–°çš„æ¨¡å¼æ˜¯æ¯å¹´è¿›è¡Œå°çš„å¢é‡å˜åŒ–ã€‚è€Œä¸æ˜¯åƒ ES6 é‚£æ ·ä¸€æ¬¡åšå¤§é‡çš„æ”¹å˜ã€‚

## æµè§ˆå™¨æ”¯æŒ

æ‰€æœ‰ç°ä»£æµè§ˆå™¨å’Œç¯å¢ƒéƒ½å·²ç»æ”¯æŒ ES6 äº†ï¼

![](../Images/242a37e2fcfedfe48a99194bb53e4ec7.png "ES6 Support")

<small>èµ„æ–™æ¥æº:[https://kanax . github . io/compat-table/es 6/](https://kangax.github.io/compat-table/es6/)</small>

Chromeã€MS Edgeã€Firefoxã€Safariã€Node å’Œè®¸å¤šå…¶ä»–è½¯ä»¶å·²ç»å†…ç½®äº†å¯¹ JavaScript ES6 çš„å¤§éƒ¨åˆ†åŠŸèƒ½çš„æ”¯æŒã€‚æ‰€ä»¥ï¼Œä½ å°†åœ¨æœ¬æ•™ç¨‹ä¸­å­¦åˆ°çš„ä¸€åˆ‡ä½ ç°åœ¨å°±å¯ä»¥å¼€å§‹ä½¿ç”¨å®ƒã€‚

è®©æˆ‘ä»¬ä» ECMAScript 6 å¼€å§‹å§ï¼

## æ ¸å¿ƒ ES6 åŠŸèƒ½

æ‚¨å¯ä»¥åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸Šæµ‹è¯•æ‰€æœ‰è¿™äº›ä»£ç ç‰‡æ®µï¼

![](../Images/7f8cbe664fa6d2be85b67405d36702cd.png "Testing Javascript ES6 classes on browser console")

æ‰€ä»¥ä¸è¦ç›¸ä¿¡æˆ‘çš„è¯ï¼Œæµ‹è¯•æ¯ä¸€ä¸ª ES5 å’Œ ES6 çš„ä¾‹å­ã€‚è®©æˆ‘ä»¬å¼€å§‹åƒå§ğŸ’ª

### å—èŒƒå›´å˜é‡

åœ¨ ES6 ä¸­ï¼Œæˆ‘ä»¬ä»ç”¨`var`å£°æ˜å˜é‡åˆ°ä½¿ç”¨`let` / `const`ã€‚

`var`æ€ä¹ˆäº†ï¼Ÿ

`var`çš„é—®é¢˜æ˜¯å˜é‡ä¼šæ³„æ¼åˆ°å…¶ä»–ä»£ç å—ä¸­ï¼Œæ¯”å¦‚`for`å¾ªç¯æˆ–`if`å—ã€‚



ES5

| 

```
1
2
3
4
5
6
7
8
9
10
11

```

 | 

```
var x = 'outer';
function test(inner) {
 if (inner) {
 var x = 'inner'; 
 return x;
 }
 return x; 
}
 test(false); 
test(true); 
```

 |



å¯¹äº`test(false)`ï¼Œä½ æœŸæœ›è¿”å›`outer`ï¼Œä½†æ˜¯æ²¡æœ‰ï¼Œä½ å¾—åˆ°äº†`undefined`ã€‚

ä¸ºä»€ä¹ˆï¼Ÿ

å› ä¸ºå³ä½¿ä¸æ‰§è¡Œ if å—ï¼Œç¬¬ 4 è¡Œçš„è¡¨è¾¾å¼`var x`ä¹Ÿä¼šè¢«æŒ‚èµ·ã€‚

> var **åŠè£…**:

*   å‡½æ•°æ˜¯å¦æœ‰ä½œç”¨åŸŸã€‚å³ä½¿åœ¨å£°æ˜ä¹‹å‰ï¼Œå®ƒåœ¨æ•´ä¸ªå‡½æ•°ä¸­éƒ½æ˜¯å¯ç”¨çš„ã€‚
*   å£°æ˜è¢«æŒ‚èµ·ã€‚æ‰€ä»¥ä½ å¯ä»¥åœ¨å˜é‡è¢«å£°æ˜ä¹‹å‰ä½¿ç”¨å®ƒã€‚
*   åˆå§‹åŒ–ä¸ä¼šè¢«æå‡ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨`var`ï¼Œæ€»æ˜¯åœ¨é¡¶éƒ¨å£°æ˜ä½ çš„å˜é‡ã€‚
*   åº”ç”¨äº†åŠè£…çš„è§„åˆ™åæˆ‘ä»¬å¯ä»¥æ›´å¥½çš„ç†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…:

    

    

    | 

    ```
    1
    2
    3
    4
    5
    6
    7
    8
    9

    ```

     | 

    ```
    var x = 'outer';
    function test(inner) {
     var x; 
     if (inner) {
     x = 'inner'; 
     return x;
     }
     return x;
    }

    ```

     |

    

ECMAScript 2015 åŠ©æ‚¨ä¸€è‡‚ä¹‹åŠ›:



ES6

| 

```
1
2
3
4
5
6
7
8
9
10
11

```

 | 

```
let x = 'outer';
function test(inner) {
 if (inner) {
 let x = 'inner';
 return x;
 }
 return x; 
}
 test(false); 
test(true); 
```

 |



å°†`var`æ”¹ä¸º`let`ä¼šä½¿äº‹æƒ…æŒ‰é¢„æœŸå·¥ä½œã€‚å¦‚æœ`if`å—æ²¡æœ‰è¢«è°ƒç”¨ï¼Œå˜é‡`x`ä¸ä¼šè¢«åŠå‡ºå—ã€‚

> è®©**æå‡**å’Œâ€œæ—¶é—´æ­»åŒºâ€

*   åœ¨ ES6 ä¸­ï¼Œ`let`ä¼šå°†å˜é‡æå‡åˆ°å—çš„é¡¶éƒ¨(è€Œä¸æ˜¯åƒ ES5 é‚£æ ·åœ¨å‡½æ•°çš„é¡¶éƒ¨)ã€‚
*   ä½†æ˜¯ï¼Œåœ¨å˜é‡å£°æ˜ä¹‹å‰å¼•ç”¨å—ä¸­çš„å˜é‡ä¼šå¯¼è‡´ä¸€ä¸ª`ReferenceError`ã€‚
*   `let`è¢«é˜»æ­¢äº†ä½œç”¨åŸŸã€‚åœ¨å£°æ˜ä¹‹å‰ä¸èƒ½ä½¿ç”¨å®ƒã€‚
*   â€œæ—¶é—´æ­»åŒºâ€æ˜¯ä»å—çš„å¼€å§‹ç›´åˆ°å˜é‡è¢«å£°æ˜çš„åŒºåŸŸã€‚

**äººç”Ÿ**

åœ¨è§£é‡Š<abbr title="immediately-invoked function expressionn">ç”Ÿæ´»</abbr>ä¹‹å‰å…ˆæ¥ä¸¾ä¸ªä¾‹å­ã€‚è¯·çœ‹è¿™é‡Œ:



ES5

| 

```
1
2
3
4
5

```

 | 

```
{
 var private = 1;
}
 console.log(private); 
```

 |



å¦‚ä½ æ‰€è§ï¼Œ`private`æ³„éœ²å‡ºå»ã€‚ä½ éœ€è¦ç”¨<abbr title="immediately-invoked function expressionn">life</abbr>(ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼)æ¥åŒ…å«å®ƒ:



ES5

| 

```
1
2
3
4
5

```

 | 

```
(function(){
 var private2 = 1;
})();
 console.log(private2); 
```

 |



å¦‚æœä½ çœ‹ä¸€ä¸‹ jQuery/lodash æˆ–å…¶ä»–å¼€æºé¡¹ç›®ï¼Œä½ ä¼šæ³¨æ„åˆ°ä»–ä»¬æœ‰<abbr title="immediately-invoked function expression">çš„ç”Ÿå‘½</abbr>æ¥é¿å…æ±¡æŸ“å…¨çƒç¯å¢ƒï¼Œåªæ˜¯åœ¨å…¨çƒå®šä¹‰ï¼Œå¦‚`_`ã€`$`æˆ–`jQuery`ã€‚

åœ¨ ES6 ä¸Šå°±å¹²å‡€å¤šäº†ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦å†ç”¨<abbr title="immediately-invoked function expression">life</abbr>äº†ï¼Œæˆ‘ä»¬å¯ä»¥åªç”¨ blocks å’Œ`let`:



ES6

| 

```
1
2
3
4
5

```

 | 

```
{
 let private3 = 1;
}
 console.log(private3); 
```

 |



**å¸¸æ•°**

å¦‚æœä½ æ ¹æœ¬ä¸æƒ³è®©ä¸€ä¸ªå˜é‡æ”¹å˜ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨`const`ã€‚

![](../Images/5019fe5fd9403a60e491e9ed046a89d1.png "const variable example")

> åº•çº¿:ä¸ºäº†`let`å’Œ`const`è€Œæ”¾å¼ƒ`var`ã€‚

*   ä½¿ç”¨`const`ä½œä¸ºæ‚¨çš„æ‰€æœ‰å‚è€ƒï¼›é¿å…ä½¿ç”¨`var`ã€‚
*   å¦‚æœå¿…é¡»é‡æ–°åˆ†é…å¼•ç”¨ï¼Œè¯·ä½¿ç”¨`let`è€Œä¸æ˜¯`const`ã€‚

### æ¨¡æ¿æ–‡å­—

å½“æˆ‘ä»¬æœ‰æ¨¡æ¿æ–‡å­—æ—¶ï¼Œæˆ‘ä»¬ä¸å¿…åšæ›´å¤šçš„åµŒå¥—è¿æ¥ã€‚çœ‹ä¸€çœ‹:



ES5

| 

```
1
2
3

```

 | 

```
var first = 'Adrian';
var last = 'Mejia';
console.log('Your name is ' + first + ' ' + last + '.');

```

 |



ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨åæ–œæ (`)å’Œå­—ç¬¦ä¸²æ’å€¼`${}`:



ES6

| 

```
1
2
3

```

 | 

```
const first = 'Adrian';
const last = 'Mejia';
console.log(`Your name is ${first} ${last}.`);

```

 |



### å¤šè¡Œå­—ç¬¦ä¸²

æˆ‘ä»¬ä¸å†éœ€è¦åƒè¿™æ ·è¿æ¥å­—ç¬¦ä¸²+ `\n`:



ES5

| 

```
1
2
3
4
5
6
7
8
9

```

 | 

```
var template = '<li *ngFor="let todo of todos" [ngClass]="{completed: todo.isDone}" >\n' +
'  \n' +
'    <input class="toggle" type="checkbox" [checked]="todo.isDone">\n' +
'    <label></label>\n' +
'    \n' +
'  \n' +
'  <input class="edit" value="">\n' +
'</li>';
console.log(template);

```

 |



åœ¨ ES6 ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å†æ¬¡ä½¿ç”¨åå‹¾å·æ¥è§£å†³è¿™ä¸ªé—®é¢˜:



ES6

| 

```
1
2
3
4
5
6
7
8
9

```

 | 

```
const template = `<li *ngFor="let todo of todos" [ngClass]="{completed: todo.isDone}" >
 
 <input class="toggle" type="checkbox" [checked]="todo.isDone">
 <label></label>
 
 
 <input class="edit" value="">
</li>`;
console.log(template);

```

 |



ä¸¤æ®µä»£ç ä¼šæœ‰å®Œå…¨ç›¸åŒçš„ç»“æœã€‚

### è§£æ„åˆ†é…

ES6 æ„é€ éå¸¸æœ‰ç”¨ï¼Œä¹Ÿå¾ˆæœ‰æ„ä¹‰ã€‚éµå¾ªä»¥ä¸‹ç¤ºä¾‹:

**ä»æ•°ç»„ä¸­è·å–å…ƒç´ **



ES5

| 

```
1
2
3
4
5
6

```

 | 

```
var array = [1, 2, 3, 4];
 var first = array[0];
var third = array[2];
 console.log(first, third); 
```

 |



ä¸ç›¸åŒ:



ES6

| 

```
1
2
3
4
5

```

 | 

```
const array = [1, 2, 3, 4];
 const [first, ,third] = array;
 console.log(first, third); 
```

 |



**äº¤æ¢å€¼**



ES5

| 

```
1
2
3
4
5
6
7
8

```

 | 

```
var a = 1;
var b = 2;
 var tmp = a;
a = b;
b = tmp;
 console.log(a, b); 
```

 |



ç­‰åŒäº



ES6

| 

```
1
2
3
4
5
6

```

 | 

```
let a = 1;
let b = 2;
 [a, b] = [b, a];
 console.log(a, b); 
```

 |



**ææ„å¤šä¸ªè¿”å›å€¼**



ES5

| 

```
1
2
3
4
5
6
7
8
9
10

```

 | 

```
function margin() {
 var left=1, right=2, top=3, bottom=4;
 return { left: left, right: right, top: top, bottom: bottom };
}
 var data = margin();
var left = data.left;
var bottom = data.bottom;
 console.log(left, bottom); 
```

 |



åœ¨ç¬¬ 3 è¡Œä¸­ï¼Œæ‚¨ä¹Ÿå¯ä»¥åƒè¿™æ ·ä»¥æ•°ç»„çš„å½¢å¼è¿”å›å®ƒ(å¹¶èŠ‚çœä¸€äº›è¾“å…¥):



| 

```
1

```

 | 

```
return [left, right, top, bottom];

```

 |



ä½†æ˜¯ï¼Œè°ƒç”¨è€…éœ€è¦è€ƒè™‘è¿”å›æ•°æ®çš„é¡ºåºã€‚



| 

```
1
2

```

 | 

```
var left = data[0];
var bottom = data[3];

```

 |



ä½¿ç”¨ ES6ï¼Œå‘¼å«è€…åªé€‰æ‹©ä»–ä»¬éœ€è¦çš„æ•°æ®(ç¬¬ 6 è¡Œ):



ES6

| 

```
1
2
3
4
5
6
7
8

```

 | 

```
function margin() {
 const left=1, right=2, top=3, bottom=4;
 return { left, right, top, bottom };
}
 const { left, bottom } = margin();
 console.log(left, bottom); 
```

 |



*æ³¨æ„:*3 å·çº¿ï¼Œæˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€äº›å…¶ä»– ES6 åŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ`{ left: left }`å‹ç¼©æˆ`{ left }`ã€‚çœ‹çœ‹ä¸ ES5 ç‰ˆæœ¬ç›¸æ¯”å®ƒæœ‰å¤šç®€æ´ã€‚æ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿ

**å‚æ•°åŒ¹é…ææ„**



ES5

| 

```
1
2
3
4
5
6
7
8
9
10

```

 | 

```
var user = {firstName: 'Adrian', lastName: 'Mejia'};
 function getFullName(user) {
 var firstName = user.firstName;
 var lastName = user.lastName;
 return firstName + ' ' + lastName;
}
 console.log(getFullName(user)); 
```

 |



ä¸ç›¸åŒ(ä½†æ›´ç®€æ´):



ES6

| 

```
1
2
3
4
5
6
7

```

 | 

```
const user = {firstName: 'Adrian', lastName: 'Mejia'};
 function getFullName({ firstName, lastName }) {
 return `${firstName} ${lastName}`;
}
 console.log(getFullName(user)); 
```

 |



**æ·±åº¦åŒ¹é…**



ES5

| 

```
1
2
3
4
5
6
7
8
9

```

 | 

```
function settings() {
 return { display: { color: 'red' }, keyboard: { layout: 'querty'} };
}
 var tmp = settings();
var displayColor = tmp.display.color;
var keyboardLayout = tmp.keyboard.layout;
 console.log(displayColor, keyboardLayout); 
```

 |



ä¸ç›¸åŒ(ä½†æ›´ç®€æ´):



ES6

| 

```
1
2
3
4
5
6
7

```

 | 

```
function settings() {
 return { display: { color: 'red' }, keyboard: { layout: 'querty'} };
}
 const { display: { color: displayColor }, keyboard: { layout: keyboardLayout }} = settings();
 console.log(displayColor, keyboardLayout); 
```

 |



è¿™ä¹Ÿç§°ä¸ºå¯¹è±¡ææ„ã€‚

å¦‚æ‚¨æ‰€è§ï¼Œææ„éå¸¸æœ‰ç”¨ï¼Œå¹¶é¼“åŠ±è‰¯å¥½çš„ç¼–ç é£æ ¼ã€‚

> æœ€ä½³å®è·µ:

*   ä½¿ç”¨æ•°ç»„ææ„æ¥å–å‡ºå…ƒç´ æˆ–äº¤æ¢å˜é‡ã€‚å®ƒä½¿æ‚¨ä¸å¿…åˆ›å»ºä¸´æ—¶å¼•ç”¨ã€‚
*   ä¸è¦å¯¹å¤šä¸ªè¿”å›å€¼ä½¿ç”¨æ•°ç»„ææ„ï¼Œè€Œè¦ä½¿ç”¨å¯¹è±¡ææ„

### ç±»åˆ«å’Œå¯¹è±¡

åœ¨ ECMAScript 6 ä¸­ï¼Œæˆ‘ä»¬ä»â€œæ„é€ å‡½æ•°â€ğŸ”¨åˆ°â€œç±»â€ğŸ¸ã€‚

> åœ¨ JavaScript ä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŸå‹ï¼Œä¹Ÿå°±æ˜¯å¦ä¸€ä¸ªå¯¹è±¡ã€‚æ‰€æœ‰ JavaScript å¯¹è±¡éƒ½ä»å®ƒä»¬çš„åŸå‹ç»§æ‰¿å®ƒä»¬çš„æ–¹æ³•å’Œå±æ€§ã€‚

åœ¨ ES5 ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ„é€ å‡½æ•°è¿›è¡Œäº†é¢å‘å¯¹è±¡çš„ç¼–ç¨‹( <abbr title="Object-Oriented Programming">OOP</abbr> )æ¥åˆ›å»ºå¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤º:



ES5

| 

```
1
2
3
4
5
6
7
8
9
10
11
12

```

 | 

```
var Animal = (function () {
 function MyConstructor(name) {
 this.name = name;
 }
 MyConstructor.prototype.speak = function speak() {
 console.log(this.name + ' makes a noise.');
 };
 return MyConstructor;
})();
 var animal = new Animal('animal');
animal.speak(); 
```

 |



åœ¨ ES6 ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€äº›è¯­æ³•ç³–ã€‚æˆ‘ä»¬å¯ä»¥ç”¨æ›´å°‘çš„é”…ç‚‰æ¿å’Œæ–°çš„å…³é”®å­—å¦‚`class`å’Œ`constructor`æ¥åšåŒæ ·çš„äº‹æƒ…ã€‚å¦å¤–ï¼Œè¯·æ³¨æ„æˆ‘ä»¬å¦‚ä½•æ¸…æ™°åœ°å®šä¹‰æ–¹æ³•`constructor.prototype.speak = function ()`å’Œ`speak()`:



ES6

| 

```
1
2
3
4
5
6
7
8
9
10
11

```

 | 

```
class Animal {
 constructor(name) {
 this.name = name;
 }
 speak() {
 console.log(this.name + ' makes a noise.');
 }
}
 const animal = new Animal('animal');
animal.speak(); 
```

 |



æ­£å¦‚æˆ‘ä»¬çœ‹åˆ°çš„ï¼Œä¸¤ç§é£æ ¼(ES5/6)åœ¨å¹•åäº§ç”Ÿç›¸åŒçš„ç»“æœï¼Œå¹¶ä¸”ä»¥ç›¸åŒçš„æ–¹å¼ä½¿ç”¨ã€‚

> æœ€ä½³å®è·µ:

*   å§‹ç»ˆä½¿ç”¨`class`è¯­æ³•ï¼Œé¿å…ç›´æ¥æ“ä½œ`prototype`ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå®ƒä½¿ä»£ç æ›´ç®€æ´ï¼Œæ›´å®¹æ˜“ç†è§£ã€‚
*   é¿å…ç©ºçš„æ„é€ å‡½æ•°ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šæ„é€ å‡½æ•°ï¼Œç±»å°±æœ‰ä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°ã€‚

### é—äº§

åŸºäºä»¥å‰çš„`Animal`ç±»ã€‚å‡è®¾æˆ‘ä»¬æƒ³è¦æ‰©å±•å®ƒå¹¶å®šä¹‰ä¸€ä¸ª`Lion`ç±»

åœ¨ ES5 ä¸­ï¼Œå®ƒæ›´å¤šåœ°æ¶‰åŠåˆ°åŸå‹ç»§æ‰¿ã€‚



ES5

| 

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19

```

 | 

```
var Lion = (function () {
 function MyConstructor(name){
 Animal.call(this, name);
 }
 MyConstructor.prototype = Object.create(Animal.prototype);
 MyConstructor.prototype.constructor = Animal;
 MyConstructor.prototype.speak = function speak() {
 Animal.prototype.speak.call(this);
 console.log(this.name + ' roars ğŸ¦');
 };
 return MyConstructor;
})();
 var lion = new Lion('Simba');
lion.speak(); 
```

 |



æˆ‘ä¸ä¼šé‡å¤æ‰€æœ‰ç»†èŠ‚ï¼Œä½†è¯·æ³¨æ„:

*   ç¬¬ 3 è¡Œï¼Œæˆ‘ä»¬ç”¨å‚æ•°æ˜¾å¼è°ƒç”¨`Animal`æ„é€ å‡½æ•°ã€‚
*   ç¬¬ 7-8 è¡Œï¼Œæˆ‘ä»¬å°†`Lion`åŸå‹åˆ†é…ç»™`Animal`çš„åŸå‹ã€‚
*   ç¬¬ 11 è¡Œï¼Œæˆ‘ä»¬ä»çˆ¶ç±»`Animal`è°ƒç”¨`speak`æ–¹æ³•ã€‚

åœ¨ ES6 ä¸­ï¼Œæˆ‘ä»¬æœ‰äº†æ–°çš„å…³é”®è¯`extends`å’Œ`super` ![superman shield](../Images/0f3a44871c8d425f82e03a69254f06fa.png)ã€‚



ES6

| 

```
1
2
3
4
5
6
7
8
9
10

```

 | 

```
class Lion extends Animal {
 speak() {
 super.speak();
 console.log(this.name + ' roars ğŸ¦');
 }
}
 const lion = new Lion('Simba');
lion.speak(); 
```

 |



ä¸ ES5 ç›¸æ¯”ï¼ŒES6 ä»£ç çœ‹èµ·æ¥æ˜¯å¤šä¹ˆæ¸…æ™°ï¼Œå®ƒä»¬åšçš„å®Œå…¨ä¸€æ ·ã€‚èµ¢äº†ï¼

> æœ€ä½³å®è·µ:

*   ä½¿ç”¨å†…ç½®æ–¹å¼ä¸`extends`ç»§æ‰¿ã€‚

### æœ¬åœŸæ‰¿è¯º

æˆ‘ä»¬ä»å¤è¯•åœ°ç‹±ğŸ‘¹å¯¹æ‰¿è¯ºğŸ™



ES5

| 

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14

```

 | 

```
function printAfterTimeout(string, timeout, done){
 setTimeout(function(){
 done(string);
 }, timeout);
}
 printAfterTimeout('Hello ', 2e3, function(result){
 console.log(result);
 printAfterTimeout(result + 'Reader', 2e3, function(result){
 console.log(result);
 });
}); 
```

 |



æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°æ¥æ”¶å›è°ƒï¼Œå¹¶åœ¨ä¸º`done`æ—¶æ‰§è¡Œã€‚æˆ‘ä»¬å¿…é¡»ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ‰§è¡Œä¸¤æ¬¡ã€‚è¿™å°±æ˜¯æˆ‘ä»¬åœ¨å›è°ƒä¸­è°ƒç”¨ç¬¬äºŒæ¬¡`printAfterTimeout`çš„åŸå› ã€‚

å¦‚æœä½ éœ€è¦ç¬¬ä¸‰æ¬¡æˆ–ç¬¬å››æ¬¡å›ç”µï¼Œè¿™å¾ˆå¿«å°±ä¼šå˜å¾—ä¸€å›¢ç³Ÿã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•é€šè¿‡æ‰¿è¯ºåšåˆ°è¿™ä¸€ç‚¹:



ES6

| 

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15

```

 | 

```
function printAfterTimeout(string, timeout){
 return new Promise((resolve, reject) => {
 setTimeout(function(){
 resolve(string);
 }, timeout);
 });
}
 printAfterTimeout('Hello ', 2e3).then((result) => {
 console.log(result);
 return printAfterTimeout(result + 'Reader', 2e3);
 }).then((result) => {
 console.log(result);
}); 
```

 |



å¦‚ä½ æ‰€è§ï¼Œæœ‰äº†æ‰¿è¯ºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¦ä¸€ä¸ªåŠŸèƒ½å®Œæˆåä½¿ç”¨`then`æ¥åšæŸäº‹ã€‚ä¸å†éœ€è¦ä¿ç•™åµŒå¥—å‡½æ•°ã€‚

### ç®­å¤´åŠŸèƒ½

ES6 æ²¡æœ‰åˆ é™¤å‡½æ•°è¡¨è¾¾å¼ï¼Œä½†æ˜¯å¢åŠ äº†ä¸€ä¸ªåä¸º arrow functions çš„æ–°å‡½æ•°ã€‚

åœ¨ ES5 ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€äº›å…³äº`this`çš„é—®é¢˜:



ES5

| 

```
1
2
3
4
5
6
7
8
9

```

 | 

```
var _this = this; 
 $('.btn').click(function(event){
 _this.sendData(); 
});
 $('.input').on('change',function(event){
 this.sendData(); 
}.bind(this)); 
```

 |



ä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªä¸´æ—¶çš„`this`æ¥å¼•ç”¨ä¸€ä¸ªå‡½æ•°æˆ–è€…ä½¿ç”¨`bind`ã€‚åœ¨ ES6 ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ç®­å¤´åŠŸèƒ½ï¼



ES6

| 

```
1
2
3
4
5
6

```

 | 

```
 $('.btn').click((event) =>  this.sendData());
 const ids = [291, 288, 984];
const messages = ids.map(value => `ID is ${value}`); 
```

 |



### ä¸ºäº†â€¦çš„

æˆ‘ä»¬ä»`for`åˆ°`forEach`ï¼Œç„¶ååˆ°`for...of`:



ES5

| 

```
1
2
3
4
5
6
7
8
9
10
11

```

 | 

```
 var array = ['a', 'b', 'c', 'd'];
for (var i = 0; i < array.length; i++) {
 var element = array[i];
 console.log(element);
}
 array.forEach(function (element) {
 console.log(element);
}); 
```

 |



çš„ ES6 ä¹Ÿå…è®¸æˆ‘ä»¬è¿›è¡Œè¿­ä»£ã€‚



ES6

| 

```
1
2
3
4
5

```

 | 

```
 const array = ['a', 'b', 'c', 'd'];
for (const element of array) {
 console.log(element);
} 
```

 |



### é»˜è®¤å‚æ•°

æˆ‘ä»¬ä»æ£€æŸ¥å˜é‡æ˜¯å¦è¢«å®šä¹‰åˆ°ç»™`default parameters`èµ‹å€¼ã€‚ä½ ä»¥å‰åšè¿‡ç±»ä¼¼çš„äº‹æƒ…å—ï¼Ÿ



ES5

| 

```
1
2
3
4
5
6
7
8
9
10
11

```

 | 

```
function point(x, y, isFlag){
 x = x &#124;&#124; 0;
 y = y &#124;&#124; -1;
 isFlag = isFlag &#124;&#124; true;
 console.log(x,y, isFlag);
}
 point(0, 0) 
point(0, 0, false) 
point(1) 
point() 
```

 |



å¯èƒ½æ˜¯çš„ï¼Œæ£€æŸ¥å˜é‡æ˜¯å¦æœ‰å€¼æˆ–èµ‹äºˆé»˜è®¤å€¼æ˜¯ä¸€ç§å¸¸è§çš„æ¨¡å¼ã€‚ç„¶è€Œï¼Œè¯·æ³¨æ„æœ‰ä¸€äº›é—®é¢˜:

*   ç¬¬ 8 è¡Œï¼Œæˆ‘ä»¬é€šè¿‡`0, 0`å¾—åˆ°`0, -1`
*   ç¬¬ 9 è¡Œï¼Œæˆ‘ä»¬é€šè¿‡äº†`false`ï¼Œä½†æ˜¯å¾—åˆ°äº†`true`ã€‚

å¦‚æœä½ æœ‰ä¸€ä¸ªå¸ƒå°”å€¼ä½œä¸ºé»˜è®¤å‚æ•°ï¼Œæˆ–è€…æŠŠå€¼è®¾ç½®ä¸ºé›¶ï¼Œå®ƒå°±ä¸èµ·ä½œç”¨ã€‚ä½ çŸ¥é“ä¸ºä»€ä¹ˆå—ï¼Ÿï¼Ÿï¼ŸES6 çš„ä¾‹å­ä¹‹åæˆ‘å†å‘Šè¯‰ä½ ï¼›)

æœ‰äº† ES6ï¼Œç°åœ¨æ‚¨å¯ä»¥ç”¨æ›´å°‘çš„ä»£ç åšå¾—æ›´å¥½ï¼



ES6

| 

```
1
2
3
4
5
6
7
8

```

 | 

```
function point(x = 0, y = -1, isFlag = true){
 console.log(x,y, isFlag);
}
 point(0, 0) 
point(0, 0, false) 
point(1) 
point() 
```

 |



æ³¨æ„ç¬¬ 5 è¡Œå’Œç¬¬ 6 è¡Œï¼Œæˆ‘ä»¬å¾—åˆ°äº†é¢„æœŸçš„ç»“æœã€‚ES5 çš„ä¾‹å­ä¸èµ·ä½œç”¨ã€‚æˆ‘ä»¬å¿…é¡»é¦–å…ˆæ£€æŸ¥`undefined`ï¼Œå› ä¸º`false`ã€`null`ã€`undefined`å’Œ`0`æ˜¯è™šå‡å€¼ã€‚æˆ‘ä»¬å¯ä»¥é¿å¼€æ•°å­—:



ES5

| 

```
1
2
3
4
5
6
7
8
9
10
11

```

 | 

```
function point(x, y, isFlag){
 x = x &#124;&#124; 0;
 y = typeof(y) === 'undefined' ? -1 : y;
 isFlag = typeof(isFlag) === 'undefined' ? true : isFlag;
 console.log(x,y, isFlag);
}
 point(0, 0) 
point(0, 0, false) 
point(1) 
point() 
```

 |



ç°åœ¨ï¼Œå½“æˆ‘ä»¬æ£€æŸ¥`undefined`æ—¶ï¼Œå®ƒåƒé¢„æœŸçš„é‚£æ ·å·¥ä½œã€‚

### ä¼‘æ¯å‚æ•°

æˆ‘ä»¬ä»è‡ªå˜é‡åˆ°å…¶ä½™å‚æ•°å’Œæ‰©å±•è¿ç®—ç¬¦ã€‚

åœ¨ ES5 ä¸Šï¼Œå¾—åˆ°ä»»æ„æ•°é‡çš„å‚æ•°æ˜¯å¾ˆéº»çƒ¦çš„:



ES5

| 

```
1
2
3
4
5
6
7

```

 | 

```
function printf(format) {
 var params = [].slice.call(arguments, 1);
 console.log('params: ', params);
 console.log('format: ', format);
}
 printf('%s %d %.2f', 'adrian', 321, Math.PI); 
```

 |



æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ rest æ“ä½œç¬¦`...`åšåŒæ ·çš„äº‹æƒ…ã€‚



ES6

| 

```
1
2
3
4
5
6

```

 | 

```
function printf(format, ...params) {
 console.log('params: ', params);
 console.log('format: ', format);
}
 printf('%s %d %.2f', 'adrian', 321, Math.PI); 
```

 |



### ä¼ æ’­ç®—å­

æˆ‘ä»¬ä»`apply()`åˆ°ä¼ æ’­è¿è¥å•†ã€‚æˆ‘ä»¬åˆæœ‰`...`æ¥æ‹¯æ•‘äº†:

> æé†’:æˆ‘ä»¬ä½¿ç”¨`apply()`å°†ä¸€ä¸ªæ•°ç»„è½¬æ¢æˆä¸€ä¸ªå‚æ•°åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼Œ`Math.max()`æ¥å—ä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`apply`è®©å®ƒå·¥ä½œã€‚

![](../Images/df6cad5c761fbc7aead5e5789d0ea233.png "JavaScript Math apply for arrays")

æ­£å¦‚æˆ‘ä»¬åœ¨å‰é¢çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`apply`å°†æ•°ç»„ä½œä¸ºå‚æ•°åˆ—è¡¨ä¼ é€’:



ES5

| 

```
1

```

 | 

```
Math.max.apply(Math, [2,100,1,6,43]) 

```

 |



åœ¨ ES6 ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ spread è¿ç®—ç¬¦:



ES6

| 

```
1

```

 | 

```
Math.max(...[2,100,1,6,43]) 

```

 |



æ­¤å¤–ï¼Œæˆ‘ä»¬ä»`concat`æ•°ç»„è½¬è€Œä½¿ç”¨ spread è¿ç®—ç¬¦:



ES5

| 

```
1
2
3
4
5

```

 | 

```
var array1 = [2,100,1,6,43];
var array2 = ['a', 'b', 'c', 'd'];
var array3 = [false, true, null, undefined];
 console.log(array1.concat(array2, array3)); 
```

 |



åœ¨ ES6 ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ spread è¿ç®—ç¬¦å±•å¹³åµŒå¥—æ•°ç»„:



ES6

| 

```
1
2
3
4
5

```

 | 

```
const array1 = [2,100,1,6,43];
const array2 = ['a', 'b', 'c', 'd'];
const array3 = [false, true, null, undefined];
 console.log([...array1, ...array2, ...array3]); 
```

 |



## ç»“è®º

JavaScript ç»å†äº†å¾ˆå¤šå˜åŒ–ã€‚æœ¬æ–‡æ¶µç›–äº†æ¯ä¸ª JavaScript å¼€å‘äººå‘˜éƒ½åº”è¯¥çŸ¥é“çš„å¤§å¤šæ•°æ ¸å¿ƒç‰¹æ€§ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä»‹ç»äº†ä¸€äº›æœ€ä½³å®è·µï¼Œä»¥ä½¿æ‚¨çš„ä»£ç æ›´ç®€æ´ã€æ›´æ˜“äºæ¨ç†ã€‚

å¦‚æœä½ è®¤ä¸ºè¿˜æœ‰å…¶ä»–ä¸€äº›å¿…é¡»çŸ¥é“çš„ç‰¹æ€§ï¼Œè¯·åœ¨ä¸‹é¢çš„è¯„è®ºä¸­å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šæ›´æ–°è¿™ç¯‡æ–‡ç« ã€‚