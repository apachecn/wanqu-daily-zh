# å¤§è§„æ¨¡å©šç¤¼:æˆ‘å¦‚ä½•ä½¿ç”¨ Twilioã€Python å’Œ Google æ¥è‡ªåŠ¨åŒ–æˆ‘çš„å©šç¤¼

> åŸæ–‡:[https://www . twilio . com/blog/2017/04/wedding-at-scale-how-I-use-twilio-python-and-Google-to-automate-my-wedding . htmlï¼ŸUTM _ source = Wanqu . co&UTM _ campaign = Wanqu+Daily&UTM _ medium = website](https://www.twilio.com/blog/2017/04/wedding-at-scale-how-i-used-twilio-python-and-google-to-automate-my-wedding.html?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website)



2016 å¹´ 9 æœˆ 3 æ—¥å¯¹ä¸–ç•Œä¸Šå¤§å¤šæ•°äººæ¥è¯´åªæ˜¯ä¸€ä¸ªæ™®é€šçš„æ—¥å­ï¼Œä½†å¯¹æˆ‘æ¥è¯´ï¼Œè¿™ä¸€å¤©å°†æ°¸è¿œå€¼å¾—çºªå¿µï¼Œå› ä¸ºæˆ‘å’Œæˆ‘çš„ä¼´ä¾£ç»“å©šäº†ã€‚

æœ‰è®¸å¤šä¸åŒçš„æ–¹é¢éœ€è¦è€ƒè™‘ï¼Œè€Œè§„åˆ’ä¸€ä¸ªå©šç¤¼ã€‚é£Ÿç‰©ã€è£…é¥°ã€é¤æ¡Œè£…ç½®(å“¦ï¼Œæ˜¯çš„ï¼Œè¿™äº›ä¸è£…é¥°æ˜¯åˆ†å¼€çš„)ã€é²œèŠ±ã€ä½å®¿ã€äº¤é€šã€å¨±ä¹å’Œä½ç½®ã€‚è™½ç„¶åœ¨ç­–åˆ’å©šç¤¼æ—¶æœ‰è®¸å¤šæœªçŸ¥å› ç´ ï¼Œä½†æˆ‘å¯ä»¥è‚¯å®šä¸€ä»¶äº‹ã€‚åœ¨å©šç¤¼ä¸­æœ‰å¾ˆå¤šåˆ—è¡¨ï¼ŒåµŒå¥—åˆ—è¡¨ï¼Œä»¥åŠæ›´å¤šçš„åˆ—è¡¨ã€‚å½“æˆ‘ç›¯ç€è¶Šæ¥è¶Šå¤šçš„å•†å“æ—¶ï¼Œæˆ‘å¼€å§‹æƒ³æ˜¯å¦æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Ÿæ„Ÿè§‰éƒ½æ˜¯æ‰‹å·¥æ“ä½œï¼Œæ•ˆç‡ä½ä¸‹ã€‚æŠ€æœ¯è‚¯å®šä¼šåœ¨æŸäº›æ–¹é¢æœ‰æ‰€æ”¹è¿›ã€‚

ä½ å¯èƒ½ä¼šæ„Ÿåˆ°æƒŠè®¶ï¼Œä½†é‚€è¯·äººä»¬å‚åŠ å©šç¤¼æ˜¯éå¸¸æ˜‚è´µçš„(è¶…è¿‡ 380 è‹±é•‘)ï¼Œå› ä¸ºä½ éœ€è¦å‘å‡ºâ€œä¿å­˜æ—¥æœŸâ€å¡å’Œéšåçš„é‚€è¯·ï¼Œå…¶ä¸­åŒ…æ‹¬å©šç¤¼çš„å…·ä½“ç»†èŠ‚ã€‚å®ƒä¹Ÿå¾ˆæ…¢ï¼Œå› ä¸ºä½ å¿…é¡»é€šè¿‡é‚®å¯„ã€‚è¿½ç€äººä»¬çœ‹ä»–ä»¬æ˜¯å¦æ”¶åˆ°é‚€è¯·ï¼Œçœ‹ä»–ä»¬æ˜¯å¦æ„¿æ„å‚åŠ å…è´¹é£Ÿç‰©å’Œé¥®æ–™çš„èšä¼šï¼Œè¿™æ˜¯*çš„æ—¶é—´å¯†é›†å‹*â€”â€”å½“ç„¶æ˜¯è‡ªåŠ¨åŒæ„å—ï¼Ÿæœ€åï¼Œè¯·æŸ¬æ˜¯ä¸ç¯ä¿çš„ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¸€æ¬¡æ€§ä½¿ç”¨çš„ï¼Œå¾ˆå®¹æ˜“ä¸¢å¤±æˆ–æ”¾é”™åœ°æ–¹ã€‚

å›åˆ°åˆ—è¡¨ã€‚å®¢äººåå•åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†:

1.  ä½ æƒ³å»çš„äººçš„åå•
2.  å›å¤äº†ä½ çš„å›å¤çš„äººçš„åå•
3.  å›ç­”â€œæ˜¯â€çš„äººçš„åå•
4.  å›ç­”â€œæ˜¯â€å¹¶é€‰æ‹©é£Ÿç‰©çš„äººçš„åå•

ä½†æ˜¯åˆ—è¡¨æ˜¯å¥½çš„ã€‚å®ƒä»¬æœ‰é¢„å®šä¹‰çš„éœ€æ±‚å’Œå“åº”ï¼Œè¿™ä½¿å®ƒä»¬æˆä¸ºè‡ªåŠ¨åŒ–çš„ç»ä½³å€™é€‰ã€‚

## ç“¶å­é‡Œçš„ä¿¡æ¯

ä¸ç®¡å¹´é¾„å¤§å°ï¼Œæˆ‘ç¡®ä¿¡å©šç¤¼åå•ä¸Šçš„æ¯ä¸ªäººéƒ½æœ‰ä¸€éƒ¨æ‰‹æœºï¼Œè¿™æ„å‘³ç€æ˜¯æ—¶å€™äº†ã€‚å¦‚æœæƒ³è·³åˆ°ä»£ç ï¼Œå¯ä»¥åœ¨ GitHub ä¸ŠæŸ¥çœ‹[å›è´­ã€‚](https://github.com/SeekTom/Twilio/tree/master/Wedication)

çŸ­ä¿¡å®Œå…¨æ»¡è¶³äº†æˆ‘çš„éœ€æ±‚ã€‚æˆ‘å¯ä»¥é…ç½®å‡ºç«™ç¾¤å‘æ¶ˆæ¯ï¼Œå¹¶å¿«é€Ÿæœ‰æ•ˆåœ°å¤„ç†å›å¤ã€‚åœ¨è‰æ‹Ÿ MVP å’Œè€ƒè™‘æ•°æ®åº“æ—¶ï¼Œæˆ‘æƒ³è¦ä¸€äº›å®¹æ˜“åˆ†äº«çš„ä¸œè¥¿ï¼Œä¸æƒ³æµªè´¹æ—¶é—´æ„å»ºè§†å›¾ã€‚å¶ç„¶å‘ç° gspread python åº“ä½¿æˆ‘èƒ½å¤Ÿ [*è¯»å†™è°·æ­Œç”µå­è¡¨æ ¼*](https://www.twilio.com/blog/2017/02/an-easy-way-to-read-and-write-to-a-google-spreadsheet-in-python.html) ã€‚è™½ç„¶ä¸æ˜¯æœ€å¿«çš„é€‰æ‹©ï¼Œä½†å®ƒç¡®å®è¶³å¤Ÿçµæ´»ï¼Œå¹¶ä¸”æä¾›äº†æ˜“äºè®¿é—®å’Œé˜…è¯»çš„è¾“å‡ºã€‚

å¯¹äºæœ€åˆçš„ç®€å†ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«ä»¥ä¸‹æ ç›®çš„ç”µå­è¡¨æ ¼:

*   åå­—
*   ç”µè¯å·ç 
*   ç¡®è®¤ _ çŠ¶æ€
*   è”ç³»äººè¯¦ç»†ä¿¡æ¯çŠ¶æ€
*   Message_count(å‘é€ç»™å®¢äººçš„æ¶ˆæ¯æ•°é‡ï¼Œç¨åä¼šæ´¾ä¸Šç”¨åœº)

ä¸»æ•°æ®è¾“å…¥å®Œæˆåï¼Œæˆ‘ä½¿ç”¨ [gspread](http://gspread.readthedocs.io/en/latest/) éå†åˆ—è¡¨ï¼Œç»™æ¯ä¸ªæœ‰æ‰‹æœºå·ç çš„å®¢äººå‘çŸ­ä¿¡:

[Sheets.py](https://github.com/SeekTom/Twilio/blob/master/Wedication/sheets.py)

```
import json
import time
import gspread
from oauth2client.client import SignedJwtAssertionCredentials
from twilio.rest import Client

# Message your attendees from a spreadsheet

# add file name for the json created for the spreadsheet
json_key = json.load(open('.json'))
scope = ['https://spreadsheets.google.com/feeds']

credentials = SignedJwtAssertionCredentials(json_key['client_email'],
                                            json_key['private_key'].encode(),
                                            scope)
gc = gspread.authorize(credentials)
wks = gc.open("wedding_guests")  # add your workbook name here
wks_attendees = wks.get_worksheet(0)  # attendees worksheet

ACCOUNT_SID = 'TWILIO_ACCOUNT_SID'
AUTH_TOKEN = 'TWILIO_AUTH_TOKEN'

client = Client(ACCOUNT_SID, AUTH_TOKEN)

# to iterate between guests, amend this based on your total
for num in range(2, 60):
    print "sleeping for 2 seconds"
    time.sleep(2)  # adding a delay to avoid filtering

    guest_number = wks_attendees.acell('B'+str(num)).value
    guest_name = wks_attendees.acell('A'+str(num)).value
    Message_body = u"\u2B50" + u"\u2764" + u"\u2B50" + u"\u2764" + u"\u2B50" + u"\u2764" + u"\u2B50" + u"\u2764" + "\n\n" + u"\u2709" +" Save the date! "+ u"\u2709" +"\n\nLauren and Thomas are delighted to invite you to our wedding.\n\nSaturday 3rd September 2016\. \n\nAwesome Hall,\nAmazing Town\n\nThe Ceremony begins at 2pm.\n\nMore details will follow shortly!\n\nPlease text YES if you are saving the date and can join us or text NO if sadly, you won't be able to be with us.\n\n" u"\u2B50" + u"\u2764" + u"\u2B50" + u"\u2764" + u"\u2B50" + u"\u2764" + u"\u2B50" + u"\u2764"
    if not guest_number:  # No mobile number skip this guest
        print guest_name + ' telephone number empty not messaging'
        wks_attendees.update_acell('E'+str(num), '0')  # set number to 0

    else:
        print 'Sending message to ' + guest_name
        client.messages.create(
            to="+" + guest_number,  # add the + back to make the number e.164
            from_="",  # your twilio number here
            body=message_body,
        )
        wks_attendees.update_acell('E'+str(num), int(wks_attendees.acell('E'+str(num)).value) + 1)  # increment the message count row
else:                  # else part of the loop
    print 'finished' 
```

ç”±äº SMS çœ‹èµ·æ¥æœ‰ç‚¹ç®€å•ï¼Œæˆ‘æ·»åŠ äº†ä¸€äº› unicode ç æ¥å¢åŠ è¶£å‘³ã€‚ä»¥ä¸‹æ˜¯å¹¸è¿çš„å—é‚€è€…çœ‹åˆ°çš„ä¿¡æ¯:

![IMG_4729.PNG](../Images/ecb94b996148a3292cee64038c71951b.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä½¿ç”¨ Flask ä½œä¸ºæˆ‘çš„ web æœåŠ¡å™¨ï¼Œå¹¶å°†æˆ‘çš„ Twilio æ¶ˆæ¯è¯·æ±‚ URL è®¾ç½®ä¸ºæŒ‡å‘ä¸€ä¸ª`/messages` urlï¼Œå¹¶åˆ›å»ºç®€å•çš„ if è¯­å¥æ¥è§£æå›å¤(yesï¼Œno):

[hello_guest.py](https://github.com/SeekTom/Twilio/blob/master/Wedication/hello_guest.py)

```
from twilio.twiml.messaging_response import MessagingResponse

@app.route("/messages", methods=['GET', 'POST'])
def hello_guest():

    resp = MessagingResponse()
    from_number = request.values.get('From', None)
    from_body = request.values.get('Body', None)
    number = from_number
    body_strip = from_body.lower()
    if "yes" in body_strip:
        # We have a keeper! Find the attendee and update their confirmation_status
        wks_attendees.update_acell("F"+str(guest_confirmation_cell.row), 'Accepted')  # update the status to accepted for that guest
        resp.message(u"\u2665" + "Thanks for confirming, we'll be in touch!" + u"\u2665")  # respond to the guest with a confirmation!

    elif "no" in from_body.lower():
        # update the confirmation_status row to declined for that guest
        wks_attendees.update_acell("F"+str(guest_confirmation_cell.row), 'Declined')
        # respond to the user confirming the action
        resp.message("Sorry to hear that, we still love you though!")

    else:  # respond with invalid keyword
        resp.message("You sent a different keyword, we need a yes or a no, you sent: "+  
                     from_body)
    return str(resp) 
```

![IMG_4740.PNG](../Images/025062f6a8a3631767848eaa7015bab9.png)

![IMG_4741.PNG](../Images/9e16044a0bf7f5fba3d3d78eced36ed2.png)

ç¬¬ä¸€æ¡ä¿¡æ¯æ˜¯åœ¨ 2 æœˆ 19 æ—¥ä¸Šåˆ 8:37 å‘å‡ºçš„ï¼Œç¬¬ä¸€æ¡ç¡®è®¤ä¿¡æ¯æ˜¯åœ¨ä¸‰åˆ†é’Ÿåçš„ 8:40 æ”¶åˆ°çš„ã€‚åˆ°ä¸Šåˆ 9 ç‚¹ 38 åˆ†ï¼Œæˆ‘å·²ç»æ”¶åˆ°äº† 23 å°ç¡®è®¤ä¿¡ï¼Œä¹Ÿå°±æ˜¯ 32%çš„æ¥å—ç‡ï¼åœ¨æœ€åˆç¾¤å‘ä¿¡æ¯çš„ä¸¤å¤©åï¼Œæˆ‘ä»¬æœ‰ 58%çš„å®¢äººç¡®è®¤äº†ï¼å°½ç®¡å–å¾—äº†æ˜æ˜¾çš„æˆåŠŸï¼Œä½†æˆ‘é‚£å³å°†æˆä¸ºå¦»å­çš„æ‰‹æœºçŸ­ä¿¡å¹¶æ²¡æœ‰å®Œå…¨æŠŠæˆ‘å½“æˆå©šç¤¼é‚€è¯·æœåŠ¡(SAAWISï¼Ÿ)ï¼Œæ‰€ä»¥æˆ‘å†³å®šç»™æˆ‘çš„åº”ç”¨å¢åŠ ä¸€äº›åŠŸèƒ½ã€‚

ç»Ÿè®¡ï¼æˆ‘å¯ä»¥è®¡ç®—ç°åœºå‡ºå¸­åå•ï¼Œå¹¶æ ¹æ®éœ€è¦è¿”å›ï¼Œç»™å‡†æ–°å¨˜å³æ—¶åé¦ˆå®¢äººåå•æ˜¯å¦‚ä½•å½¢æˆçš„ã€‚ä»£ç éå¸¸ç®€å•ï¼Œå› ä¸ºæˆ‘å·²ç»åœ¨ç”µå­è¡¨æ ¼ä¸­è®¾ç½®äº†ä¸€äº›åŸºæœ¬çš„è®¡æ•°å™¨ï¼Œæ‰€ä»¥åªéœ€è·å–è¿™äº›å•å…ƒæ ¼çš„å†…å®¹å¹¶å°†å…¶æ·»åŠ åˆ° SMS ä¸­:

[hello_guest.py](https://github.com/SeekTom/Twilio/blob/master/Wedication/hello_guest.py)

```
# attendance variables
guest_confirmed = wks_attendees.acell('C70').value
guest_unconfirmed = wks_attendees.acell('C71').value
guest_no_response = wks_attendees.acell('C72').value
guest_acceptance = wks_attendees.acell('C73').value

elif "numbers" in from_body.lower():
    # return statistics (total guests, food choices list)
    resp.message("R.S.V.P update:\n\nTotal Accepted: " + guest_confirmed  
                 "\n\nTotal declined: "   guest_unconfirmed   "\n\nTotal no response: "+  
                 guest_no_response + "\n\nTotal acceptance rate: " + guest_acceptance) 
```

ä»¥ä¸‹æ˜¯ç”Ÿæˆçš„çŸ­ä¿¡:
![IMG_4731.PNG](../Images/6c70fb9a130d60dd6bab68de15e44050.png)

ä¸å®Œå…¨æ¼‚äº®ï¼Œä½†ç›¸å½“æœ‰ç”¨ã€‚

åŠ³ä¼¦ç°åœ¨å¯ä»¥è®°å½•å‡ºå‹¤æƒ…å†µçš„äº‹å®æ˜¯ä¸€ç§å‹åŠ›ç¼“è§£ã€‚ä»é‚£æ—¶èµ·ï¼Œæ‰€æœ‰çš„ç³»ç»Ÿéƒ½è¿è½¬æ­£å¸¸ï¼ŒçŸ­ä¿¡ä¹Ÿå°½å¯èƒ½åœ°èå…¥åˆ°å©šç¤¼çš„æ–¹æ–¹é¢é¢ã€‚æœ‰äº›æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œæ¯”å¦‚åœ¨å©šç¤¼ç½‘ç«™ä¸Šçº¿æ—¶å‘é€é€šçŸ¥çŸ­ä¿¡(è‡ªç„¶æ˜¯ç”± Heroku æä¾›æ”¯æŒçš„),åˆ†äº«ç¤¼ç‰©æ¸…å•ä»¥åŠå…¶ä»–æˆ‘è‡³ä»Šä»å¼•ä»¥ä¸ºè±ªçš„äº‹æƒ…ã€‚

## é£Ÿç‰©ï¼Œç¾å‘³çš„é£Ÿç‰©

åœ¨å»ºç«‹äº†ç®€å†è¡¨ä¹‹åï¼Œæœ€å¸¸è¢«è€½æçš„æ˜¯è®©å®¢äººç¡®è®¤é£Ÿç‰©é€‰æ‹©ã€‚ä½ ä¼šæƒŠè®¶åœ°å‘ç°è®©äººä»¬é€‰æ‹©å…è´¹é£Ÿç‰©æœ‰å¤šéš¾ã€‚ç¬¬ä¸€æ­¥æ˜¯å‘å‡ºå¦ä¸€æ¡çŸ­ä¿¡ï¼Œå‘Šè¯‰é‚£äº›å·²ç»åŒæ„è®¿é—®ç½‘ç«™çš„å®¢äººï¼Œé€šè¿‡è°·æ­Œè¡¨å•é€‰æ‹©ä»–ä»¬çš„é£Ÿç‰©ã€‚éå¸¸æ ‡å‡†çš„ä¸œè¥¿ï¼Œä½†æ˜¯ï¼Œè¯¥è¡¨å•è¢«è®¾ç½®ä¸ºå¡«å……ä¸ä¸ä¼šè€…ç›¸åŒçš„å·¥ä½œç°¿ã€‚è¿™æ„å‘³ç€æˆ‘ç°åœ¨æœ‰äº†è¢«æ¥å—çš„å®¢äººçš„ç”µå­è¡¨æ ¼ï¼Œä»¥åŠé‚£äº›å¡«å†™äº†é£Ÿç‰©é€‰æ‹©è¡¨çš„äººçš„ç”µå­è¡¨æ ¼ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘å¿…é¡»ç­‰å¾…å®¢äººæ…¢æ…¢é€‰æ‹©ä»–ä»¬çš„é£Ÿç‰©ï¼Œä½†æˆ‘çš„å©šç¤¼æ˜¯ç”± Twilio é©±åŠ¨çš„ï¼Œè¿™æ„å‘³ç€æˆ‘å¯ä»¥æ¯«ä¸è´¹åŠ›åœ°è¿½é€äººä»¬ã€‚

æ•°æ®éœ€è¦åŒ¹é…å®¢äººå§“åçš„ä¸¤ä¸ªç”µå­è¡¨æ ¼ï¼Œå¦‚æœåŒ¹é…ï¼Œæ›´æ–°å®¢äººçš„é£Ÿç‰©é€‰æ‹©çŠ¶æ€ã€‚è¿™éœ€è¦ä¸€ç‚¹é¢å¤–çš„å·¥ä½œï¼Œä½†ä¸€æ—¦ä»£ç è¢«æ’åºï¼Œæˆ‘å¯ä»¥æŒ‰éœ€æ‰¹é‡è¿è¡Œè„šæœ¬ï¼Œå¹¶åœ¨æœ€åé€šè¿‡ SMS è·å¾—æˆ‘çš„ä¸ä¼šè€…é€‰æ‹©çš„æœ€æ–°çŠ¶æ€:

[food.py](https://github.com/SeekTom/Twilio/blob/master/Wedication/food.py)

```
import json
import time
import gspread
from oauth2client.client import SignedJwtAssertionCredentials
from twilio.rest import Client

# add file name for the json created for the spread sheet
json_key = json.load(open(''))
scope = ['https://spreadsheets.google.com/feeds']

credentials = SignedJwtAssertionCredentials(json_key['client_email'],
                                            json_key['private_key'].encode(),
                                            scope)
gc = gspread.authorize(credentials)
wks = gc.open("")  # add your spreadsheet name here
wks_attendees = wks.get_worksheet(0)  # attendees worksheet
wks_food = wks.get_worksheet(1)  # food responses worksheet

ACCOUNT_SID = 'TWILIO_ACCOUNT_SID'
AUTH_TOKEN = 'TWILIO_AUTH_TOKEN'

client = Client(ACCOUNT_SID, AUTH_TOKEN)

# to iterate between 10 to 60 manual hack to ensure no guests not left out
for num in range(2, 60):
    food_guest_name = wks_food.acell('B'+str(num)).value  # food choice name column

    if food_guest_name:
        attendees_name = wks_attendees.find(val_food_guest_name).value
        attendees_name_row = wks_attendees.find(val_food_guest_name).row
        menu_status = wks_attendees.acell("G"+str(attendees_name_row)).value

        if food_guest_name == attendees_name:
            print
            if menu_status == 'Y':  # data already matched, move on
                print('Skipping')

            else:  # user has supplied their choices, update main spreadsheet
                print ('Food sheet name ' + food_guest_name + 'Attendees sheet name ' + attendees_name)
                # update menu choices row
                wks_attendees.update_acell("G"+str(attendees_name_row), 'Y')
        else:
            print('nothing found, moving on')
            wks_attendees.update_acell('E'+str(num), int(wks.acell('E'+str(num)).value) + 1)  # increment the message count row

    else:
        # send message to the admin that the process has been completed with update stats
        client.messages.create(from_="",  # twilio number here
                               to="",  # admin number here
                               body="Finished processing current meal listnnGuest meals confirmed" + guest_meals_confirmed + "\n\nGuest meals unconfirmed: " + guest_meals_unconfirmed) 
```

æ—¢ç„¶å·²ç»æœ‰äº†ç¡®å®šçš„å®¢äººåå•å’Œè¶Šæ¥è¶Šå¤šçš„é£Ÿç‰©é€‰æ‹©ï¼Œé‚£ä¹ˆé€šè¿‡ä¸»åº”ç”¨ç¨‹åºå…¬å¼€è¿™äº›ç»Ÿè®¡æ•°æ®æ˜¯æœ‰æ„ä¹‰çš„ã€‚æ‰€æœ‰éœ€è¦åšçš„å°±æ˜¯æŠ“å–ç›¸å…³å•å…ƒæ ¼çš„å†…å®¹ï¼Œå¹¶å›å¤ä¸€æ¡çŸ­ä¿¡:

[Hello_guest.py](https://github.com/SeekTom/Twilio/blob/master/Wedication/hello_guest.py)

```
# respond with the current food totals and the meal choices
elif "food" in body_strip.strip():

    resp.message("Guest meals decided:" + guest_meals_confirmed + 
                 "\nGuest meals undecided: " + guest_meals_unconfirmed +
                 "\n\nMenu breakdown:\n\n" + starter_option_1 +": " +
                 starter_option_1_amount + "\n" + starter_option_2 +": " +
                 starter_option_2_amount + "\n" + starter_option_3 +": " +
                 starter_option_3_amount + "\n" + main_option_1 +": " +
                 main_option_1_amount + "\n" + main_option_2 +": " + main_option_2_amount +
                 "\n" + main_option_3 +": " + main_option_3_amount + "\n" +
                 dessert_option_1 + ": " + dessert_option_1_amount + "\n" + dessert_option_2
                 + ": " + dessert_option_2_amount) 
```

![IMG_4733.PNG](../Images/c9cb249a05112f94b0742f752db23d3b.png)

è¿™æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œè®©å©šç¤¼å®´ä¼šæ‰¿åŠäººäº†è§£æˆ‘ä»¬çš„è¿›å±•ï¼Œå¹¶æä¾›å¯æ“ä½œçš„æ•°æ®ï¼Œè°æ²¡æœ‰é€‰æ‹©ã€‚è¿½é€å®¢äººæ˜¯è‡ªåŠ¨åŒ–çš„å¦ä¸€ä¸ªå€™é€‰å¯¹è±¡ã€‚åªéœ€éå†ä¸ä¼šè€…åˆ—è¡¨ï¼Œæ‰¾åˆ°æ²¡æœ‰é€‰æ‹©ç”¨é¤é€‰é¡¹çš„æ·˜æ°”å®¢äººï¼Œå¹¶å‘ä»–ä»¬å‘é€æ¶ˆæ¯ï¼

[Chase.py](https://github.com/SeekTom/Twilio/blob/master/Wedication/chase.py)

```
for num in range(2, 72):  # manual hack to ensure no guests not left out
    print "sleeping for 3 seconds"

    time.sleep(3)  # adding a delay to avoid carrier filtering
    wedding_guest_number = wks_attendees.acell('B'+str(num)).value  # grab attendee tel number
    wedding_guest_name = wks_attendees.acell('A'+str(num)).value  # grab attendee name
    menu_guest = wks_attendees.acell('G'+str(num)).value

    if not wedding_guest_number:
        print wedding_guest_name+' telephone number empty not messaging'  # output to console that we are not messaging this guest due to lack of telephone number
        wks_attendees.update_acell('H'+str(num), '1')  # increment the message count row for the individual user

    else:
        if menu_guest == "N":  # guest has not chosen food! CHASE THEM!
            print 'Sending message to '+wedding_guest_name
            client.messages.create(
                to="+" + wedding_guest_number,
                from_="",  # your Twilio number here
                body="If you have received this message, you have not chosen your food options for Tom & Lauren's Wedding!\n\nYou can pick your choices via the website, no paper or postage required!\n\nhttp://www.yourwebsitehere.com/food"
            )
            wks_attendees.update_acell('H'+str(num), int(wks_attendees.acell('H'+str(num)).value) + 1)  # increment the message count row for the individual user
else:                  # else part of the loop
    print 'finished' 
```

![IMG_4735.PNG](../Images/9babf8d1f550c6aded30b8ec446bfd3a.png)

è¿™ä¸ªé‡è¦çš„æ—¥å­æ¥å¾—æ¯”æˆ‘ä»¬æƒ³è±¡çš„è¿˜è¦å¿«ã€‚å‰©ä¸‹å”¯ä¸€è¦åšçš„äº‹æƒ…æ˜¯å‘é€æœ€åä¸€æ¡çŸ­ä¿¡ï¼Œæé†’å®¢äººåŸºæœ¬ç»†èŠ‚ï¼Œå¹¶ä¸ºè‡ªå·±å‡†å¤‡ä¸€æŠŠä¼ï¼Œä»¥æŠµå¾¡å…¸å‹çš„å¤šé›¨çš„è‹±å›½å¤å­£:

![IMG_4742.PNG](../Images/806cf16b32e8455ec6a4b47ec4274c60.png)

## æ¦‚æ‹¬èµ·æ¥

å©šç¤¼ä»æ¥éƒ½ä¸æ˜¯ç®€å•çš„äº‹æƒ…ï¼Œæ„Ÿè§‰å¾ˆå¤šæ–¹é¢éƒ½è¶…å‡ºäº†ä½ çš„æ§åˆ¶ã€‚è‡ªåŠ¨åŒ–æ— ç–‘è®©æˆ‘çš„ç”Ÿæ´»å˜å¾—æ›´è½»æ¾ï¼Œå› ä¸ºå®ƒæä¾›äº†ä¸€ä¸ªä¸æˆ‘ä»¬çš„å®¢äººç›´æ¥æ²Ÿé€šçš„æ¸ é“ï¼Œä»¥åŠæ— æ•°ç§æˆ‘å¯ä»¥è·Ÿè¸ªã€æ¨åŠ¨å’Œä¿ƒä½¿ä»–ä»¬åšå‡ºå›åº”çš„ä¸åŒæ–¹å¼ã€‚å®ƒå¸®åŠ©æˆ‘ä»¬åœ¨å©šç¤¼ä¸­ä¼—æ‰€å‘¨çŸ¥çš„è€—æ—¶æ–¹é¢å˜å¾—ç§¯æä¸»åŠ¨ï¼Œè®©æˆ‘ä»¬å¯ä»¥ä¸“æ³¨äºè¿™ä¸ªå¤§æ—¥å­çš„å…¶ä»–é‡è¦æ–¹é¢ã€‚

ä¸ºå¤æ‚çš„é—®é¢˜æ„å»ºå¯ä¼¸ç¼©çš„è§£å†³æ–¹æ¡ˆä»æ¥éƒ½ä¸å®¹æ˜“ï¼Œå³ä½¿åœ¨æœ€ç»ˆå½¢å¼ä¸‹ï¼Œæˆ‘çš„åº”ç”¨ç¨‹åºæœ‰æ—¶ä¹Ÿå¾ˆè„†å¼±ã€‚æˆ‘æ›¾è®¡åˆ’æ„å»ºä¸€ä¸ªæ›´å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬è¿›åº¦æ•°æ®å¯è§†åŒ–ã€è¯­éŸ³é›†æˆå’Œå‡å°‘å¯¹ CLI è„šæœ¬çš„ä¾èµ–ï¼Œä½†æ—¶é—´å äº†æˆ‘çš„ä¸Šé£ã€‚æ€»çš„æ¥è¯´ï¼Œæˆ‘å¯¹äº‹æƒ…çš„è¿›å±•å¾ˆæ»¡æ„ã€‚æ²¡æœ‰ä¸€ä¸ªæ²Ÿé€šç³»ç»Ÿæ˜¯å®Œç¾çš„ã€‚ä½ éœ€è¦å®ç°æœ€é€‚åˆä½ çš„å—ä¼—çš„æ¸ é“ï¼Œæ— è®ºæ˜¯[çŸ­ä¿¡](https://www.twilio.com/docs/api/rest/sending-messages)ã€[è¯­éŸ³](https://www.twilio.com/docs/api/rest/making-calls)ã€[èŠå¤©](https://www.twilio.com/docs/api/chat)ã€[è§†é¢‘](https://www.twilio.com/docs/api/video)ï¼Œè¿˜æ˜¯[æ——è¯­](https://en.wikipedia.org/wiki/Semaphore_(programming))ã€‚

è¦è¯´å©šç¤¼è‡ªåŠ¨åŒ–ï¼Œæˆ‘æ˜¯ [@seektom åœ¨ Twitter](https://twitter.com/SeekTom) ã€‚

ğŸ‰æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼

å‡ºäº‹äº†ã€‚è¯·å†è¯•ä¸€æ¬¡ã€‚

